Copyright (c) 2015, Bo Wang, Academy of Mathematics and Systems Science,
Chinese Academy of Sciences, Beijing 100190, China
	
3Dec User Guide
This is a beta version. So please contact Bo Wang (flish_wang@sina.com) for any problems, bugs or
suggestions.
	
	Usage
		Pre-requisite for Operating systems:
			The executable files were built under Ubuntu 14.01 LTS and tested to work well on
			Redhat Enterprise 7.2(Maipo). However, We do not guarentee that they run as expected
			on other systems, especially lower-version ones. If the executable files did not work,
			please re-build them from the source codes or contact me for help.
		
		To run the base caller, execute the binary file 3Dec.linux (under Linux) or 3Dec 
		(built from source code).
		
		Type in "3Dec --help" to see the manuals.
		
		3Dec-train is used to train new logestic regression model for Phred quality scores. The 
		default model 3Dec uses was trained based on the first tile in BlindCall Hiseq2000 PhiX  
		dataset (distributed with paper PMID 24413520). Training new model requires an entire tile, 
		in which all reads should have a known reference. Mismatches between short reads and 
		reference will result in underestimated quality scores.
		
		Before the training, you should run 3Dec with options -q -t to generate corrected
		intensity file "cifname.cif", then align the generated .fastq file to the reference of the
		short reads using a mapping software such as bowtie2 or BWA; the mapping results should 
		be stored in "samname.sam" in the same order. Then the model file "modelname" used by
		3Dec(with option -m) can be generated by typing the command:
			$ 3Dec-train cifname samname modelname
	
	Building & Installation from source codes
		The makefile works under Linux (Ubuntu and Redhat). Current version may not 
		support other OSs well.
		
		Pre-requisite
			1)make
			2)gcc
			3)liblinear http://www.csie.ntu.edu.tw/~cjlin/liblinear/
			4)Eigen http://eigen.tuxfamily.org/index.php?title=Main_Page
			(I placed the above two packages in Folder ./include. Users may replace
				or modify them with other versions)
		
		 Build & Installation
			Open an terminal, change directory to the root of the package, first type:
				$make clean
			to remove previously generated files.
			Then type
				$ make
			The executable files will be built in ./bin.
			Or type:
				$ sudo make install
			The executable files will be copied to $(DESTDIR) (Default: /usr/local/bin)
			Installation directory can be changed to DESTFOLDER by typing
				$ make install DESTDIR=DESTFOLDER
			Meanwhile, as an alternative, you can also compile the codes using packages in
			the ./include folder by:
				$ make dependency=included
			(which is recomended on Redhat due to the difficulty of installing the required packages)
			If your compiler does not support openmp, please add the argument “openmp=disalbed” with make
			to disable the parallel feature:
				$ make openmp=disabled
			Due to the API change between liblinear-1.9X, liblinear-1.9- and liblinear-2.0+, we had 
			troubles to deal with the different situations. So if you meet compiling errors for 
			3Dec-train, please update the Library Liblinear to 2.0+ and re-run make with argument 
			“DEFINES=-D_liblinear_2”:
				$ make DEFINES=-D_liblinear_2
			
			
	Command for the paper:
		CIF files with corrected spatial crosstalk were generated by the command:
			(Hiseq2000 Phix174 dataset)
			$ 3Dec -t -s -c 1,101 -i ./PhiX174_UMD_HiSeq_201305/Data/Intensities/L004 -o outputfolder s+
			(GAII Phix174 dataset)
			$ 3Dec -t -L -i ./GAII-ABCtoy -o outputfolder s+
		The .fastq files were generated by the command:
			(Hiseq2000 Phix174 dataset)
			$ 3Dec -q -f -s -c 1,101 -i ./PhiX174_UMD_HiSeq_201305/Data/Intensities/L004 -o outputfolder s+
			(GAII Phix174 dataset)
			$ 3Dec -q -f -L -i ./GAII-ABCtoy -o outputfolder s+

Licence
	3Dec is subject to  Creative Commons Attribution-NonCommercial-ShareAlike 4.0 
	International Public License. A copy of the licence is attached with the software. You can 
	also obtain one at http://creativecommons.org/licenses/by-nc-sa/4.0/.
	
	Please notice that the source codes in the "include" folder are subject to different licences 
	such as MPL, MIT or BSD and the author of 3Dec does not have their copyright. 
	Licences for them can be found within or along with their files.
	
	
